<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Compare Properties - HomeMore</title>
  <script src="https://kit.fontawesome.com/f4efa66e1d.js" crossorigin="anonymous"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Open+Sans:ital,wght@0,300..800;1,300..800&display=swap" rel="stylesheet" />
  <style>
     /* William & Mary Colors */
     :root {
            --wm-dark-green: #003B2A;
            --wm-green: #004E38;
            --wm-gold: #866F45;
            --white: #ffffff;
            --light-gray: #f5f5f5;
            --medium-gray: #e0e0e0;
            --text-dark: #333333;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: "Open Sans", sans-serif;
        }

        body {
            background: var(--light-gray);
        }

        /* Header Styles */
        .wm-dark-skinny {
            background: var(--wm-dark-green);
            height: 12px;
            width: 100%;
        }

        .main-header {
            background: var(--white);
            height: 80px;
            width: 100%;
            display: flex;
            align-items: center;
            justify-content: space-between;
            border-bottom: 2px solid var(--wm-green);
            position: sticky;
            top: 0;
            z-index: 1000;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        .header-left {
            display: flex;
            align-items: center;
            margin-left: 10px;
            gap: 60px;
            margin-right: 20px;
        }

        .site-title img {
            width: 200px;
            margin-top: 10px;
        }

        .desktop-nav {
            display: flex;
            gap: 35px;
            align-items: center;
        }

        .nav-link {
            text-decoration: none;
            color: var(--text-dark);
            font-size: 16px;
            font-weight: 500;
            transition: color 0.3s ease;
            position: relative;
        }

        .nav-link:hover {
            color: var(--wm-green);
        }

        .nav-link.active {
            color: var(--wm-green);
        }

        .nav-link.active::after {
            content: '';
            position: absolute;
            bottom: -8px;
            left: 0;
            right: 0;
            height: 3px;
            background: var(--wm-green);
        }

        .header-right-welcome {
            background: var(--wm-dark-green);
            height: 100%;
            padding: 0 30px;
            display: flex;
            flex-direction: column;
            align-items: flex-end;
            justify-content: center;
            gap: 4px;
            min-width: 200px;
            flex-shrink: 0;
        }

        .welcome-text {
            color: var(--white);
            font-size: 14px;
            font-weight: 400;
        }

        .user-name {
            color: var(--white);
            font-size: 18px;
            font-weight: 700;
        }

        /* Mobile Header */
        .mobile-header {
            display: none;
            position: fixed;
            top: 12px;
            left: 0;
            right: 0;
            z-index: 1001;
            padding: 15px 20px;
            align-items: center;
            justify-content: space-between;
            background: rgba(0, 59, 42, 0.95);
        }

        .mobile-hamburger {
            width: 30px;
            height: 26px;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            background: none;
            border: none;
            cursor: pointer;
            padding: 0;
            z-index: 1002;
        }

        .mobile-hamburger span {
            width: 100%;
            height: 4px;
            background: var(--white);
            border-radius: 2px;
            transition: all 0.3s ease;
        }

        .mobile-hamburger.active span:nth-child(1) {
            transform: rotate(45deg) translate(8px, 8px);
        }

        .mobile-hamburger.active span:nth-child(2) {
            opacity: 0;
        }

        .mobile-hamburger.active span:nth-child(3) {
            transform: rotate(-45deg) translate(7px, -7px);
        }

        .mobile-logo img {
            width: 150px;
            height: auto;
        }

        .mobile-user {
            font-size: 14px;
            color: var(--white);
            font-weight: 500;
        }

        /* Mobile Sidebar */
        .mobile-sidebar {
            position: fixed;
            top: 0;
            left: -75%;
            width: 75%;
            height: 100vh;
            background: var(--white);
            z-index: 1001;
            transition: left 0.3s ease-in-out;
            overflow-y: auto;
            box-shadow: 4px 0 12px rgba(0, 0, 0, 0.2);
        }

        .mobile-sidebar.active {
            left: 0;
        }

        .sidebar-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100vh;
            background: rgba(0, 0, 0, 0.5);
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s ease, visibility 0.3s ease;
        }

        .sidebar-overlay.active {
            opacity: 1;
            visibility: visible;
        }

        .sidebar-header {
            background: var(--wm-dark-green);
            padding: 30px 20px;
            color: var(--white);
        }

        .sidebar-header h2 {
            font-size: 24px;
            margin-bottom: 8px;
        }

        .sidebar-nav {
            padding: 20px 0;
        }

        .sidebar-nav-link {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 18px 25px;
            text-decoration: none;
            color: var(--text-dark);
            font-size: 16px;
            font-weight: 500;
            border-bottom: 1px solid var(--medium-gray);
            transition: background 0.2s ease;
        }

        .sidebar-nav-link:hover {
            background: var(--light-gray);
        }

        .sidebar-nav-link.active {
            background: #e8f5e9;
            color: var(--wm-green);
            font-weight: 600;
        }

        /* Comparison Page Styles */
        .comparison-container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 30px 20px;
        }

        .page-header {
            margin-bottom: 30px;
        }

        .page-title {
            font-size: 36px;
            color: var(--wm-dark-green);
            margin-bottom: 10px;
        }

        .page-subtitle {
            font-size: 16px;
            color: var(--text-dark);
        }

        /* Controls Section */
        .comparison-controls {
            background: var(--white);
            padding: 20px;
            border-radius: 12px;
            margin-bottom: 30px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        .controls-row {
            display: flex;
            gap: 15px;
            align-items: center;
            flex-wrap: wrap;
            margin-bottom: 15px;
        }

        .controls-row:last-child {
            margin-bottom: 0;
        }

        .control-label {
            font-weight: 600;
            color: var(--wm-dark-green);
            min-width: 150px;
        }

        .add-listing-btn {
            background: var(--wm-green);
            color: var(--white);
            border: none;
            padding: 10px 20px;
            border-radius: 6px;
            cursor: pointer;
            font-weight: 600;
            transition: background 0.3s ease;
        }

        .add-listing-btn:hover {
            background: var(--wm-dark-green);
        }

        .feature-toggles {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        .feature-toggle {
            display: flex;
            align-items: center;
            gap: 5px;
            padding: 8px 12px;
            background: var(--light-gray);
            border-radius: 6px;
            cursor: pointer;
            transition: background 0.3s ease;
        }

        .feature-toggle:hover {
            background: var(--medium-gray);
        }

        .feature-toggle input {
            cursor: pointer;
        }

        .feature-toggle.active {
            background: #e8f5e9;
            color: var(--wm-green);
        }

        /* Comparison Grid */
        .comparison-grid {
            display: flex;
            gap: 20px;
            overflow-x: auto;
            padding-bottom: 20px;
        }

        .comparison-card {
            background: var(--white);
            border-radius: 12px;
            min-width: 320px;
            max-width: 400px;
            flex: 1;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            overflow: hidden;
            position: relative;
        }

        .add-card {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 500px;
            background: var(--light-gray);
            border: 3px dashed var(--medium-gray);
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .add-card:hover {
            border-color: var(--wm-green);
            background: #e8f5e9;
        }

        .add-icon {
            font-size: 48px;
            color: var(--wm-green);
            margin-bottom: 15px;
        }

        .add-text {
            font-size: 18px;
            color: var(--text-dark);
            font-weight: 600;
        }

        .remove-btn {
            position: absolute;
            top: 110px;
            right: 10px;
            background: transparent;
            border: none;
            width: 30px;
            height: 30px;
            font-size: 20px;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 10;
            transition: all 0.3s ease;
        }

        .listing-image {
            width: 100%;
            height: 200px;
            object-fit: cover;
        }

        .listing-content {
            padding: 20px;
        }

        .listing-title {
            font-size: 22px;
            font-weight: 700;
            color: var(--wm-dark-green);
            margin-bottom: 8px;
        }

        .listing-address {
            font-size: 14px;
            color: #666;
            margin-bottom: 15px;
        }

        .listing-price {
            font-size: 28px;
            font-weight: 700;
            color: var(--wm-green);
            margin-bottom: 20px;
        }

        .listing-price span {
            font-size: 16px;
            font-weight: 400;
            color: var(--text-dark);
        }

        .listing-features {
            border-top: 2px solid var(--light-gray);
            padding-top: 15px;
        }

        .feature-row {
            display: flex;
            justify-content: space-between;
            padding: 12px 0;
            border-bottom: 1px solid var(--light-gray);
        }

        .feature-row:last-child {
            border-bottom: none;
        }

        .feature-label {
            font-weight: 600;
            color: var(--text-dark);
        }

        .feature-value {
            color: #666;
        }

        .amenities-list {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-top: 10px;
        }

        .amenity-tag {
            background: var(--wm-green);
            color: var(--white);
            padding: 4px 10px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: 600;
        }

        /* Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 2000;
            align-items: center;
            justify-content: center;
        }

        .modal.active {
            display: flex;
        }

        .modal-content {
            background: var(--white);
            border-radius: 12px;
            padding: 30px;
            max-width: 600px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .modal-title {
            font-size: 24px;
            color: var(--wm-dark-green);
            font-weight: 700;
        }

        .modal-close {
            background: none;
            border: none;
            font-size: 24px;
            cursor: pointer;
            color: var(--text-dark);
        }

        .listings-grid {
            display: grid;
            gap: 15px;
        }

        .listing-option {
            display: flex;
            gap: 15px;
            padding: 15px;
            border: 2px solid var(--light-gray);
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .listing-option:hover {
            border-color: var(--wm-green);
            background: #e8f5e9;
        }

        .listing-option.disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .listing-option.disabled:hover {
            border-color: var(--light-gray);
            background: var(--white);
        }

        .listing-thumb {
            width: 100px;
            height: 75px;
            object-fit: cover;
            border-radius: 6px;
        }

        .listing-info {
            flex: 1;
        }

        .listing-info h4 {
            font-size: 16px;
            color: var(--wm-dark-green);
            margin-bottom: 5px;
        }

        .listing-info p {
            font-size: 14px;
            color: #666;
            margin-bottom: 5px;
        }

        .listing-info .price {
            font-weight: 700;
            color: var(--wm-green);
        }

        /* Responsive */
        @media (max-width: 950px) {
            .wm-dark-skinny {
                display: block;
            }

            .main-header {
                display: none;
            }

            .mobile-header {
                display: flex;
            }

            .comparison-container {
                padding-top: 80px;
            }

            .page-title {
                font-size: 28px;
            }

            .controls-row {
                flex-direction: column;
                align-items: flex-start;
            }

            .control-label {
                min-width: auto;
            }

            .comparison-grid {
                flex-direction: column;
            }

            .comparison-card {
                max-width: 100%;
                min-width: 100%;
            }
        }

        @media (max-width: 480px) {
            .modal-content {
                padding: 20px;
            }

            .listing-option {
                flex-direction: column;
            }

            .listing-thumb {
                width: 100%;
                height: 150px;
            }
        }
  </style>
</head>
<body>
  <div class="wm-dark-skinny"></div>
  <header class="main-header">
    <div class="header-left">
      <a href="../index.html" class="site-title"><img src="../img/HomeMore_logo.png" alt="HomeMore Logo" /></a>
      <nav class="desktop-nav">
        <a href="pages/search.html" class="nav-link">Search</a>
        <a href="pages/resources.html" class="nav-link">Resources</a>
        <a href="pages/compare.html" class="nav-link active">Comparison</a>
        <a href="pages/saved.html" class="nav-link">Saved</a>
        <a href="#messages" class="nav-link">Messages</a>
      </nav>
    </div>
    <div class="header-right-welcome">
      <span class="welcome-text">Welcome Back,</span>
      <span class="user-name">John Doe</span>
    </div>
  </header>

  <div class="mobile-header">
    <button class="mobile-hamburger" aria-label="Toggle Menu" onclick="toggleSidebar()">
      <span></span>
      <span></span>
      <span></span>
    </button>
    <div class="mobile-logo">
      <img src="../img/BW_HomeMore_logo.png" alt="HomeMore Logo" />
    </div>
    <div class="mobile-user">John Doe</div>
  </div>

  <div class="sidebar-overlay" onclick="toggleSidebar()"></div>

  <aside class="mobile-sidebar">
    <div class="sidebar-header">
      <h2>Welcome Back,</h2>
      <p>John Doe</p>
    </div>
    <nav class="sidebar-nav">
      <a href="pages/search.html" class="sidebar-nav-link">
        <span>Search Listings</span>
        <span>→</span>
      </a>
      <a href="pages/resources.html" class="sidebar-nav-link">
        <span>Resources & Tools</span>
        <span>→</span>
      </a>
      <a href="pages/compare.html" class="sidebar-nav-link active">
        <span>Compare Properties</span>
        <span>→</span>
      </a>
      <a href="pages/saved.html" class="sidebar-nav-link">
        <span>Saved Listings</span>
        <span>→</span>
      </a>
      <a href="#messages" class="sidebar-nav-link">
        <span>Messages</span>
        <span>→</span>
      </a>
    </nav>
  </aside>

  <div class="comparison-container">
    <div class="comparison-header">
      <h1>Compare Properties</h1>
      <p>Select properties to compare side-by-side and customize which features to view</p>
    </div>

    <div class="comparison-controls">
      <div class="controls-title">Select Features to Compare</div>
      <div class="feature-toggles">
        <div class="feature-toggle">
          <input type="checkbox" id="toggle-price" checked />
          <label for="toggle-price">Price</label>
        </div>
        <div class="feature-toggle">
          <input type="checkbox" id="toggle-bedrooms" checked />
          <label for="toggle-bedrooms">Bedrooms</label>
        </div>
        <div class="feature-toggle">
          <input type="checkbox" id="toggle-bathrooms" checked />
          <label for="toggle-bathrooms">Bathrooms</label>
        </div>
        <div class="feature-toggle">
          <input type="checkbox" id="toggle-type" checked />
          <label for="toggle-type">Property Type</label>
        </div>
        <div class="feature-toggle">
          <input type="checkbox" id="toggle-distance" checked />
          <label for="toggle-distance">Distance from Campus</label>
        </div>
        <div class="feature-toggle">
          <input type="checkbox" id="toggle-amenities" checked />
          <label for="toggle-amenities">Amenities</label>
        </div>
      </div>
    </div>

    <div class="comparison-grid" id="comparisonGrid"></div>
  </div>

  <div class="modal" id="addListingModal">
    <div class="modal-content">
      <div class="modal-header">
        <h2>Select a Property to Compare</h2>
        <button class="modal-close" onclick="closeModal()">&times;</button>
      </div>
      <div class="listings-grid" id="modalListingsGrid"></div>
      <div class="modal-footer">
        <button class="btn btn-secondary" onclick="closeModal()">Cancel</button>
      </div>
    </div>
  </div>

  <script>
    const listings = [
      {
        id: 1,
        title: "Colonial Apartments",
        address: "123 Richmond Rd, Williamsburg, VA",
        bedrooms: 2,
        bathrooms: 2,
        price: 1200,
        type: "apartment",
        distance: "0.5 miles from campus",
        image: "https://images.unsplash.com/photo-1545324418-cc1a3fa10c00?w=400&h=300&fit=crop",
        amenities: ["parking", "laundry", "gym"],
      },
      {
        id: 2,
        title: "Tribe House",
        address: "456 Scotland St, Williamsburg, VA",
        bedrooms: 4,
        bathrooms: 2,
        price: 1600,
        type: "house",
        distance: "0.3 miles from campus",
        image: "https://images.unsplash.com/photo-1568605114967-8130f3a36994?w=400&h=300&fit=crop",
        amenities: ["parking", "laundry"],
      },
      {
        id: 3,
        title: "Griffin Condos",
        address: "789 Jamestown Rd, Williamsburg, VA",
        bedrooms: 1,
        bathrooms: 1,
        price: 950,
        type: "condo",
        distance: "0.8 miles from campus",
        image: "https://images.unsplash.com/photo-1502672260066-6bc35f0a1881?w=400&h=300&fit=crop",
        amenities: ["parking", "pool", "gym"],
      },
      {
        id: 4,
        title: "Wren Townhouse",
        address: "321 Monticello Ave, Williamsburg, VA",
        bedrooms: 3,
        bathrooms: 2.5,
        price: 1450,
        type: "townhouse",
        distance: "0.6 miles from campus",
        image: "https://images.unsplash.com/photo-1564013799919-ab600027ffc6?w=400&h=300&fit=crop",
        amenities: ["parking", "laundry", "pets"],
      },
      {
        id: 5,
        title: "Sunken Garden Apartments",
        address: "555 Landrum Dr, Williamsburg, VA",
        bedrooms: 2,
        bathrooms: 1,
        price: 1100,
        type: "apartment",
        distance: "0.4 miles from campus",
        image: "https://images.unsplash.com/photo-1522708323590-d24dbb6b0267?w=400&h=300&fit=crop",
        amenities: ["laundry", "gym"],
      },
    ];

    let comparedListings = [listings[0], listings[1]];
    const maxCompare = 4;
    const features = {
      price: true,
      bedrooms: true,
      bathrooms: true,
      type: true,
      distance: true,
      amenities: true,
    };

    function toggleSidebar() {
      const sidebar = document.querySelector(".mobile-sidebar");
      const overlay = document.querySelector(".sidebar-overlay");
      const hamburger = document.querySelector(".mobile-hamburger");
      sidebar.classList.toggle("active");
      overlay.classList.toggle("active");
      hamburger.classList.toggle("active");
      document.body.style.overflow = sidebar.classList.contains("active") ? "hidden" : "";
    }

    function renderComparisonGrid() {
      const grid = document.getElementById("comparisonGrid");
      grid.innerHTML = "";
      comparedListings.forEach((listing) => {
        grid.appendChild(createListingCard(listing));
      });
      if (comparedListings.length < maxCompare) {
        grid.appendChild(createAddCard());
      }
    }

    function createListingCard(listing) {
      const card = document.createElement("div");
      card.className = "listing-card";
      let detailsHTML = "";
      if (features.bedrooms) {
        detailsHTML += `
          <div class="detail-row">
            <i class="fas fa-bed detail-icon"></i>
            <span class="detail-label">Bedrooms</span>
            <span class="detail-value">${listing.bedrooms}</span>
          </div>`;
      }
      if (features.bathrooms) {
        detailsHTML += `
          <div class="detail-row">
            <i class="fas fa-bath detail-icon"></i>
            <span class="detail-label">Bathrooms</span>
            <span class="detail-value">${listing.bathrooms}</span>
          </div>`;
      }
      if (features.type) {
        detailsHTML += `
          <div class="detail-row">
            <i class="fas fa-home detail-icon"></i>
            <span class="detail-label">Type</span>
            <span class="detail-value">${listing.type}</span>
          </div>`;
      }
      if (features.distance) {
        detailsHTML += `
          <div class="detail-row">
            <i class="fas fa-map-marker-alt detail-icon"></i>
            <span class="detail-label">Distance</span>
            <span class="detail-value">${listing.distance}</span>
          </div>`;
      }
      let amenitiesHTML = "";
      if (features.amenities && listing.amenities.length > 0) {
        amenitiesHTML = `
          <div class="amenities-list">
            ${listing.amenities
              .map((amenity) => `<span class="amenity-tag">${amenity}</span>`)
              .join("")}
          </div>`;
      }
      card.innerHTML = `
        <div class="listing-card-header">
          <img src="${listing.image}" alt="${listing.title}" class="listing-image" />
          <button class="remove-btn" onclick="removeListing(${listing.id})">
            <i class="fas fa-times"></i>
          </button>
        </div>
        <div class="listing-card-body">
          <div class="listing-title">${listing.title}</div>
          <div class="listing-address">${listing.address}</div>
          ${
            features.price
              ? `<div class="listing-price">$${listing.price.toLocaleString()}</div>`
              : ""
          }
          <div class="listing-details">${detailsHTML}</div>
          ${amenitiesHTML}
        </div>`;
      return card;
    }

    function createAddCard() {
      const card = document.createElement("div");
      card.className = "add-listing-card";
      card.innerHTML = `
        <div class="add-icon">
          <i class="fas fa-plus"></i>
        </div>
        <h3>Add a Property to Compare</h3>
        <p>Choose another listing to add it to your comparison view.</p>`;
      card.addEventListener("click", openModal);
      return card;
    }

    function removeListing(id) {
      comparedListings = comparedListings.filter((l) => l.id !== id);
      renderComparisonGrid();
    }

    function openModal() {
      const modal = document.getElementById("addListingModal");
      const grid = document.getElementById("modalListingsGrid");
      grid.innerHTML = "";

      const available = listings.filter(
        (l) => !comparedListings.some((c) => c.id === l.id)
      );

      if (available.length === 0) {
        const msg = document.createElement("p");
        msg.textContent =
          "All available properties are already in your comparison.";
        grid.appendChild(msg);
      } else {
        available.forEach((listing) => {
          const item = document.createElement("div");
          item.className = "modal-listing";
          item.innerHTML = `
            <img src="${listing.image}" alt="${listing.title}" class="modal-listing-image" />
            <div class="modal-listing-info">
              <div class="modal-listing-title">${listing.title}</div>
              <div class="modal-listing-details">
                ${listing.bedrooms} bd • ${listing.bathrooms} ba • ${listing.distance}
              </div>
              <div class="modal-listing-price">$${listing.price.toLocaleString()}</div>
            </div>`;
          item.addEventListener("click", () => {
            if (comparedListings.length >= maxCompare) return;
            comparedListings.push(listing);
            closeModal();
            renderComparisonGrid();
          });
          grid.appendChild(item);
        });
      }

      modal.classList.add("active");
    }

    function closeModal() {
      document.getElementById("addListingModal").classList.remove("active");
    }

    document
      .getElementById("toggle-price")
      .addEventListener("change", (e) => {
        features.price = e.target.checked;
        renderComparisonGrid();
      });
    document
      .getElementById("toggle-bedrooms")
      .addEventListener("change", (e) => {
        features.bedrooms = e.target.checked;
        renderComparisonGrid();
      });
    document
      .getElementById("toggle-bathrooms")
      .addEventListener("change", (e) => {
        features.bathrooms = e.target.checked;
        renderComparisonGrid();
      });
    document
      .getElementById("toggle-type")
      .addEventListener("change", (e) => {
        features.type = e.target.checked;
        renderComparisonGrid();
      });
    document
      .getElementById("toggle-distance")
      .addEventListener("change", (e) => {
        features.distance = e.target.checked;
        renderComparisonGrid();
      });
    document
      .getElementById("toggle-amenities")
      .addEventListener("change", (e) => {
        features.amenities = e.target.checked;
        renderComparisonGrid();
      });

    renderComparisonGrid();
  </script>
</body>
</html>
